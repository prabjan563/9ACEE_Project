{% extends 'base.html' %}
{% load static %}

{% block title %}9ACEE – 9th Asian Conference on Earthquake Engineering{% endblock %}

{% block content %}

<div class="slider-container">
    <div class="slider" id="slider">
        <div class="slide active">
            <img src="static\images\nset.jpg" alt="logo_of_nset">
            <div class="slide-content">
                <h2>9th Asian Conference on Earthquake Engineering</h2>
                <p> May 4–6, 2025 (२१-२३ बैशाख २०८३) | Location: Kathmandu, Nepal</p>
            </div>
        </div>
        <div class="slide">
            <img src="static\images\nsetbuilding.png" alt="NSET Building">
            <div class="slide-content">
                <h2>Nset Head Office Building</h2>
            </div>
        </div>
        <div class="slide">
            <img src="static\images\patan.jpg" alt="ktm_outline">
            <div class="slide-content">
                <h2>Patan Durbr square</h2>
                <p>City of Arts And Architecture</p>
            </div>
        </div>
        <div class="slide">
            <img src="static\images\logo.png" alt="valleya-img">
            <div class="slide-content">
                <h2>9Th ACEE Logo</h2>
                <p>
            </div>
        </div>
    </div>
    
    <div class="slider-arrows">
        <div class="slider-arrow prev" id="prev">&#10094;</div>
        <div class="slider-arrow next" id="next">&#10095;</div>
    </div>
    
    <div class="slider-nav" id="slider-nav">
        <div class="slider-dot active" data-index="0"></div>
        <div class="slider-dot" data-index="1"></div>
        <div class="slider-dot" data-index="2"></div>
        <div class="slider-dot" data-index="3"></div>
    </div>
</div>

<style>
    .abstraction-container {
        display: flex;
        justify-content: center;
        align-items: center;
        height: 10vh;
        background: linear-gradient(135deg, #1e3c72, #2a5298);
    }

    .abstraction-btn {
        padding: 15px 40px;
        font-size: 18px;
        font-weight: 600;
        color: #ffffff;
        background: linear-gradient(135deg, #00c6ff, #0072ff);
        border: none;
        border-radius: 10px;
        cursor: pointer;
        text-decoration: none;
        transition: all 0.3s ease-in-out;
        letter-spacing: 1px;
    }

    .abstraction-btn:active {
        transform: translateY(0);
        box-shadow: 0 6px 15px rgba(0, 0, 0, 0.3);
    }

    /* About Section Styles */
    .about-section {
        padding: 60px 20px;
        background-color: #f8f9fa;
    }

    .about-content {
        max-width: 1200px;
        margin: 0 auto;
        display: flex;
        align-items: center;
        gap: 40px;
        flex-wrap: wrap;
    }

    .about-image {
        flex: 1;
        min-width: 300px;
    }

    .about-image img {
        width: 100%;
        border-radius: 10px;
        box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
    }

    .about-text {
        flex: 1;
        min-width: 300px;
    }

    .about-text h2 {
        font-size: 32px;
        color: #1e3c72;
        margin-bottom: 20px;
    }

    .about-text p {
        font-size: 16px;
        line-height: 1.8;
        color: #555;
        margin-bottom: 25px;
    }

    .learn-more-btn {
        display: inline-block;
        padding: 12px 30px;
        background-color: #0072ff;
        color: white;
        text-decoration: none;
        border-radius: 5px;
        font-weight: 600;
        transition: all 0.3s ease;
    }

    .learn-more-btn:hover {
        background-color: #0056cc;
        transform: translateY(-2px);
        box-shadow: 0 4px 10px rgba(0, 114, 255, 0.3);
    }

    /* Timeline Styles */
    .timeline-section {
        padding: 60px 20px;
        background-color: #ffffff;
    }

    .timeline-section h2 {
        text-align: center;
        font-size: 36px;
        color: #1e3c72;
        margin-bottom: 60px;
    }

    .timeline-container {
        max-width: 1400px;
        margin: 0 auto;
        position: relative;
    }

    .timeline-line {
        position: absolute;
        top: 30px;
        left: 0;
        right: 0;
        height: 4px;
        background: linear-gradient(to right, #0072ff 0%, #0072ff 25%, #00c853 25%, #00c853 50%, #00c853 75%, #ff9800 75%, #ff9800 100%);
    }

    .timeline-items {
        display: flex;
        justify-content: space-between;
        position: relative;
        flex-wrap: wrap;
    }

    .timeline-item {
        flex: 1;
        min-width: 200px;
        text-align: center;
        padding: 0 10px;
    }

    .timeline-dot {
        width: 24px;
        height: 24px;
        border-radius: 50%;
        margin: 0 auto 20px;
        position: relative;
        z-index: 2;
    }

    .timeline-dot.submission {
        background-color: #0072ff;
    }

    .timeline-dot.registration {
        background-color: #00c853;
    }

    .timeline-dot.conference {
        background-color: #ff9800;
    }

    .timeline-item h3 {
        font-size: 16px;
        font-weight: 600;
        color: #333;
        margin-bottom: 8px;
    }

    .timeline-item p {
        font-size: 14px;
        color: #0072ff;
        margin: 0;
    }

    .timeline-legend {
        display: flex;
        justify-content: center;
        gap: 30px;
        margin-top: 40px;
        flex-wrap: wrap;
    }

    .legend-item {
        display: flex;
        align-items: center;
        gap: 8px;
    }

    .legend-dot {
        width: 12px;
        height: 12px;
        border-radius: 50%;
    }

    /* Conference Proceedings Styles */
    .proceedings-section {
        padding: 60px 20px;
        background-color: #f8f9fa;
    }

    .proceedings-content {
        max-width: 1200px;
        margin: 0 auto;
        display: flex;
        align-items: center;
        gap: 60px;
        flex-wrap: wrap;
    }

    .proceedings-text {
        flex: 1;
        min-width: 300px;
    }

    .proceedings-text h2 {
        font-size: 36px;
        color: #1e3c72;
        margin-bottom: 15px;
    }

    .proceedings-text p {
        font-size: 16px;
        color: #666;
        margin-bottom: 25px;
    }

    .proceedings-image {
        flex: 0 0 auto;
        display: flex;
        align-items: center;
        gap: 20px;
    }

    .proceedings-image img {
        height: 200px;
        box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
    }

    /* Video Section Styles */
    .video-section {
        padding: 60px 20px;
        background-color: #ffffff;
    }

    .video-section h2 {
        text-align: center;
        font-size: 36px;
        color: #1e3c72;
        margin-bottom: 40px;
    }

    .video-container {
        max-width: 1200px;
        margin: 0 auto;
        display: flex;
        gap: 30px;
        flex-wrap: wrap;
    }

    .video-main {
        flex: 2;
        min-width: 300px;
    }

    .video-main iframe {
        width: 100%;
        height: 400px;
        border-radius: 10px;
        box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
    }

    .video-sidebar {
        flex: 1;
        min-width: 250px;
        display: flex;
        flex-direction: column;
        gap: 20px;
    }

    .video-item {
        display: flex;
        align-items: center;
        gap: 15px;
        padding: 15px;
        background-color: #f8f9fa;
        border-radius: 8px;
        cursor: pointer;
        transition: all 0.3s ease;
    }

    .video-item:hover {
        background-color: #e9ecef;
        transform: translateX(5px);
    }

    .video-thumbnail {
        width: 120px;
        height: 80px;
        background-color: #ddd;
        border-radius: 5px;
        overflow: hidden;
    }

    .video-thumbnail img {
        width: 100%;
        height: 100%;
        object-fit: cover;
    }

    .video-info h4 {
        font-size: 14px;
        color: #333;
        margin: 0 0 5px 0;
    }

    .video-info p {
        font-size: 12px;
        color: #666;
        margin: 0;
    }

    @media (max-width: 768px) {
        .about-content,
        .proceedings-content {
            flex-direction: column;
        }

        .timeline-items {
            flex-direction: column;
            gap: 30px;
        }

        .timeline-line {
            display: none;
        }

        .video-main iframe {
            height: 250px;
        }
    }
    .video-section {
    padding: 40px 20px;
    max-width: 1400px;
    margin: 0 auto;
}

.video-section h2 {
    text-align: center;
    font-size: 2.5rem;
    color: #2c5282;
    margin-bottom: 40px;
}

.video-layout {
    display: flex;
    gap: 20px;
    align-items: flex-start;
}

/* Main Video Player - Left Side */
.main-video {
    flex: 0 0 65%;
    aspect-ratio: 16 / 9;
    background: #000;
    border-radius: 12px;
    overflow: hidden;
    box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
}

.main-video iframe {
    width: 100%;
    height: 100%;
}

/* Video Playlist - Right Side */
.video-playlist {
    flex: 1;
    display: flex;
    flex-direction: column;
    gap: 15px;
    max-height: 600px;
    overflow-y: auto;
}

.video-item {
    display: flex;
    gap: 12px;
    padding: 10px;
    background: #f7fafc;
    border-radius: 8px;
    cursor: pointer;
    transition: all 0.3s ease;
    border: 2px solid transparent;
}

.video-item:hover {
    background: #edf2f7;
    border-color: #3182ce;
    transform: translateX(5px);
}

.video-thumbnail {
    width: 120px;
    height: 90px;
    object-fit: cover;
    border-radius: 6px;
    flex-shrink: 0;
}

.video-info {
    flex: 1;
}

.video-info h4 {
    font-size: 0.95rem;
    margin: 0 0 5px 0;
    color: #2d3748;
    line-height: 1.3;
}

.video-info p {
    font-size: 0.85rem;
    color: #718096;
    margin: 0;
}

/* Scrollbar styling for playlist */
.video-playlist::-webkit-scrollbar {
    width: 6px;
}

.video-playlist::-webkit-scrollbar-track {
    background: #f1f1f1;
    border-radius: 10px;
}

.video-playlist::-webkit-scrollbar-thumb {
    background: #cbd5e0;
    border-radius: 10px;
}

.video-playlist::-webkit-scrollbar-thumb:hover {
    background: #a0aec0;
}

/* Responsive Design */
@media (max-width: 968px) {
    .video-layout {
        flex-direction: column;
    }
    
    .main-video {
        flex: 0 0 100%;
    }
    
    .video-playlist {
        max-height: 400px;
    }
}
</style>

<div>
    <div class="abstraction-container">
        <a href="https://docs.google.com/forms/d/e/1FAIpQLSe2qpl9jI0vpxv9Y3PxrGxJzwCVkx-7FMZQqK09fmJQGtqEnQ/viewform" target="_blank">
            <button class="abstraction-btn">
                Abstraction Submission
            </button>
        </a>
    </div>
</div>

<!-- About Section -->
<section class="about-section">
    <div class="about-content">
        <div class="about-image">
            <img src="{% static 'images/logo.png' %}" alt="9ACEE Conference Logo">
        </div>
        <div class="about-text">
            <h2>About 9ACEE </h2>
            <p>
                The Asia Conference on Earthquake Engineering (ACEE) was initiated to create a dedicated platform in Asia for dialogue and cooperation among earthquake engineering professionals. Since its inception, ACEE has served as a meeting point for advancing research, sharing lessons from damaging earthquakes, and translating new knowledge into safer buildings, infrastructure, and communities.
            </p>
            <a href="{% url 'themes' %}" class="learn-more-btn">Learn More</a>
        </div>
    </div>
</section>

<!-- Timeline Section -->
<section class="timeline-section">
    <h2>Important Dates</h2>
    <div class="timeline-container">
        <div class="timeline-line"></div>
        <div class="timeline-items">
            <div class="timeline-item">
                <div class="timeline-dot submission"></div>
                <h3>Abstract submission</h3>
                <p>20 January 2026</p>
            </div>
            <div class="timeline-item">
                <div class="timeline-dot submission"></div>
                <h3>Review of abstracts & notification</h3>
                <p>30 January 2026</p>
            </div>
            <div class="timeline-item">
                <div class="timeline-dot registration"></div>
                <h3>Second circular with Registration</h3>
                <p>30 February 2026</p>
            </div>
            <div class="timeline-item">
                <div class="timeline-dot registration"></div>
                <h3>Submission of full paper</h3>
                <p>30 March 2026</p>
            </div>
            <div class="timeline-item">
                <div class="timeline-dot conference"></div>
                <h3>Review and Finalzation of paper</h3>
                <p>15 April 2026</p>
            </div>
                        <div class="timeline-item">
                <div class="timeline-dot conference"></div>
                <h3>Third/Final circular (final program, agenda & logistics)</h3>
                <p>20 April 2026</p>
            </div>
                        <div class="timeline-item">
                <div class="timeline-dot conference"></div>
                <h3>Deasline for submission of presentation files</h3>
                <p>30 April 2026</p>
            </div>
        </div>
    </div>
</section>



<!-- Conference Proceedings Section -->
<section class="proceedings-section">
    <div class="proceedings-content">
        <div class="proceedings-text">
            <h2>Conference Proceedings</h2>
            <p>Explore the 9th Acee proceedings </p>
            <a href="{% url 'paperformat' %}" class="learn-more-btn">Open Proceedings Book</a>
        </div>
        <div class="proceedings-image">
            <img src="{% static 'images/logo.png' %}" alt="9ACEE Conference Logo">
        </div>
    </div>
</section>


<!-- Video Section -->
<section class="video-section">
    <h2>Highlights of 9th Acee </h2>
    
    {% if videos %}
    <div class="video-layout">
        <!-- Main Video Player (Left) -->
        <div class="main-video">
            <iframe 
                id="mainPlayer"
                width="100%" 
                height="100%" 
                src="{{ videos.0.get_youtube_embed_url }}" 
                title="{{ videos.0.title }}"
                frameborder="0" 
                allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" 
                referrerpolicy="strict-origin-when-cross-origin"
                allowfullscreen>
            </iframe>
        </div>
        
        <!-- Video Thumbnails (Right) -->
        <div class="video-playlist">
            {% for video in videos %}
            <div class="video-item" onclick="changeVideo('{{ video.get_youtube_embed_url }}', '{{ video.title|escapejs }}')">
                <img src="https://img.youtube.com/vi/{{ video.get_youtube_id }}/mqdefault.jpg" 
                     alt="{{ video.title }}" 
                     class="video-thumbnail"
                     onerror="this.src='{% static "images/default-thumbnail.jpg" %}'">
                <div class="video-info">
                    <h4>{{ video.title }}</h4>
                    <p>{{ video.description|truncatewords:5 }}</p>
                </div>
            </div>
            {% endfor %}
        </div>
    </div>
    {% else %}
    <div style="text-align: center; padding: 40px;">
        <p style="color: #666;">No videos available at the moment.</p>
    </div>
    {% endif %}
</section>

<script>
function changeVideo(embedUrl, title) {
    if (!embedUrl) {
        console.error('No embed URL provided');
        return;
    }
    
    const mainPlayer = document.getElementById('mainPlayer');
    if (mainPlayer) {
        mainPlayer.src = embedUrl;
        mainPlayer.title = title;
        
        // Scroll to video player
        mainPlayer.scrollIntoView({ behavior: 'smooth', block: 'center' });
    }
}

// Debug: Log video information on page load
document.addEventListener('DOMContentLoaded', function() {
    const mainPlayer = document.getElementById('mainPlayer');
    if (mainPlayer) {
        console.log('Main player src:', mainPlayer.src);
    }
});
</script>


<main class="container">
    <section id="about">
        <h2 class="section-title">Welcome</h2>
        <p>
            9th Asia Conference on Earthquake Engineering (9ACEE) is a regional forum that brings together researchers, practitioners, engineers, policy actors, and academics to exchange knowledge and experiences in earthquake engineering and disaster risk reduction. The conference aims to bridge science and practice by highlighting innovations in engineering, risk assessment, preparedness, and resilient recovery, while strengthening collaboration across the Asia–Pacific region.
        </p>
    </section>

    <section id="hosts-sponsors">
        <div class="subsection">
            <h3>Updates / Subscription</h3>
            <p>
                Subscribe to receive email updates about the call for papers, registration deadlines, program announcements, and event logistics.
            </p>
            <div style="display: flex; justify-content: center; align-items: center; min-height: 20vh; padding: 40px 0;">
                <a href="{% url 'subscribe' %}" class="subscribe-btn">
                    <svg class="bell-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M18 8A6 6 0 0 0 6 8c0 7-3 9-3 9h18s-3-2-3-9"></path>
                        <path d="M13.73 21a2 2 0 0 1-3.46 0"></path>
                    </svg>
                    Subscribe
                </a>
            </div>
            <div style="display: flex; justify-content: center; align-items: center; min-height: 20vh; padding: 40px 0;">
                <a href="{% url 'information' %}" class="subscribe-btn">
                    <svg class="bell-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M18 8A6 6 0 0 0 6 8c0 7-3 9-3 9h18s-3-2-3-9"></path>
                        <path d="M13.73 21a2 2 0 0 1-3.46 0"></path>
                    </svg>
                    Updates
                </a>
            </div>
        </div>
    </section>
</main>

{% endblock %}

{% block extra_js %}
<script>
    const slides = document.querySelectorAll('.slide');
    const dots = document.querySelectorAll('.slider-dot');
    let currentSlide = 0;
    let slideInterval;

    function showSlide(n) {
        slides.forEach(slide => slide.classList.remove('active'));
        dots.forEach(dot => dot.classList.remove('active'));
        
        currentSlide = (n + slides.length) % slides.length;
        
        slides[currentSlide].classList.add('active');
        dots[currentSlide].classList.add('active');
    }

    function nextSlide() {
        showSlide(currentSlide + 1);
    }

    function prevSlide() {
        showSlide(currentSlide - 1);
    }

    function startSlideShow() {
        slideInterval = setInterval(nextSlide, 5000);
    }

    function stopSlideShow() {
        clearInterval(slideInterval);
    }

    document.getElementById('next').addEventListener('click', () => {
        nextSlide();
        stopSlideShow();
        startSlideShow();
    });

    document.getElementById('prev').addEventListener('click', () => {
        prevSlide();
        stopSlideShow();
        startSlideShow();
    });

    dots.forEach((dot, index) => {
        dot.addEventListener('click', () => {
            showSlide(index);
            stopSlideShow();
            startSlideShow();
        });
    });

    startSlideShow();
</script>
{% endblock %}